{% comment %}
  This snippet renders the Trust Badges/Key Features.
  It is designed to be rendered within product-info.liquid,
  and relies on its settings being defined in the product-template section schema.

  @param parent_section: The section object (from product-template.liquid) passed in.
{% endcomment %}

{%- if parent_section.blocks.size > 0 -%}
  <section class="section section--tight product-trust-badges-section">
    <div class="container">
      <div class="product-trust-badges-grid">
        {%- for block in parent_section.blocks -%}
          {%- if block.type == 'trust_badge' -%}
            <div
              class="product-trust-badge"
              {{ block.shopify_attributes }}
            >
              <div class="product-trust-badge__icon">
                {%- if block.settings.custom_icon != blank -%}
                  {%- assign icon_url = block.settings.custom_icon | img_url: '60x' -%}
                  <img
                    src="{{ icon_url }}"
                    alt="{{ block.settings.title | escape }}"
                    loading="lazy"
                  >
                {%- else -%}
                  {%- render 'icon', icon: block.settings.icon, stroke_width: 1.5 -%}
                {%- endif -%}
              </div>

              <div class="product-trust-badge__content">
                {%- if block.settings.title != blank -%}
                  <h3 class="product-trust-badge__title heading h5">{{ block.settings.title | escape }}</h3>
                {%- endif -%}
                {%- if block.settings.content != blank -%}
                  <div class="product-trust-badge__text rte">
                    {{ block.settings.content }}
                  </div>
                {%- endif -%}
              </div>
            </div>
          {%- endif -%}
        {%- endfor -%}
      </div>
    </div>
  </section>
{%- endif -%}